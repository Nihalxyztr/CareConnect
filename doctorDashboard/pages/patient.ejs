<div class="dashboard-header">
    <h2>Patient Details</h2>
    <p>Patient: <strong><%= patient.name %></strong></p>
</div>

<h3 class="section-title">Appointments With This Patient</h3>

<% if (appointments.length === 0) { %>

    <p>No appointments found with this patient.</p>

<% } else { %>

    <div class="cards-container">

        <% appointments.forEach(a => { %>

            <div class="card">

                <p><strong>Date:</strong> <%= a.date %></p>
                <p><strong>Time:</strong> <%= a.time %></p>

                <p><strong>Description:</strong></p>
                <p><%= a.description || "No description provided." %></p>

                <hr style="margin: 15px 0; border: none; border-top: 1px solid #eee;">

                <!-- Files -->
                <p><strong>Attachments:</strong></p>

                <% if (!a.appointmentFiles || a.appointmentFiles.length === 0) { %>
                    <p><em>No files uploaded.</em></p>
                <% } else { %>
                    <ul style="list-style: none; padding: 0;">
                        <% a.appointmentFiles.forEach(f => { %>
                            <li style="margin: 8px 0;">
                                <a href="/uploads/appointmentFiles/<%= f.filename %>" target="_blank" style="color: #0077b6; text-decoration: none;">
                                    <%= f.originalName %>
                                </a>
                            </li>
                        <% }) %>
                    </ul>
                <% } %>

                <div style="margin-top: 15px;">
                    <a 
                        href="/doctor-dashboard/appointment/<%= a._id %>"
                        class="btn-primary"
                    >
                        View Appointment
                    </a>
                </div>

            </div>

        <% }) %>

    </div>

<% } %>
